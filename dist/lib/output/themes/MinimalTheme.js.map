{"version":3,"file":"MinimalTheme.js","sourceRoot":"","sources":["../../../../src/lib/output/themes/MinimalTheme.ts"],"names":[],"mappings":";;AAAA,yBAAyB;AACzB,6BAA6B;AAE7B,iDAA8C;AAE9C,qDAAkD;AAClD,0DAAsG;AACtG,sCAAsC;AACtC,6DAA0D;AAE1D,MAAa,YAAa,SAAQ,2BAAY;IAO1C,YAAY,QAAkB,EAAE,QAAgB;QAC5C,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAE1B,QAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QACnC,QAAQ,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC;QAC5C,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;QACvC,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAEhC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,kBAAS,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACvE,CAAC;IASD,iBAAiB,CAAC,IAAY;QAC1B,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,EAAE;YAC/C,OAAO,KAAK,CAAC;SAChB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IASD,OAAO,CAAC,OAA0B;QAC9B,MAAM,IAAI,GAAiB,EAAE,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,IAAI,uBAAU,CAAC,YAAY,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC,CAAC;QAE9D,OAAO,CAAC,GAAG,GAAG,YAAY,CAAC;QAC3B,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC;QAC3B,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;QAE9B,CAAC,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;YACvC,2BAAY,CAAC,cAAc,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC;IAChB,CAAC;IAOO,mBAAmB,CAAC,IAAe;QACvC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC,CAAC,KAAK,YAAY,kBAAU,CAAC,EAAE;YAChC,OAAO;SACV;QAED,IAAI,CAAC,GAAG,GAAG,IAAI,+BAAc,EAAE,CAAC;QAChC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IAChD,CAAC;IAQD,MAAM,CAAC,QAAQ,CAAC,KAA4B,EAAE,MAAsB;QAChE,MAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,EAAE,CAAC;QACtC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAA4B,EAAE,EAAE;YAC9C,MAAM,IAAI,GAAG,+BAAc,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;YACxD,YAAY,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AAlFD,oCAkFC","sourcesContent":["import * as FS from 'fs';\r\nimport * as Path from 'path';\r\n\r\nimport { DefaultTheme } from './DefaultTheme';\r\nimport { Renderer } from '../renderer';\r\nimport { UrlMapping } from '../models/UrlMapping';\r\nimport { Reflection, DeclarationReflection, ProjectReflection } from '../../models/reflections/index';\r\nimport { PageEvent } from '../events';\r\nimport { NavigationItem } from '../models/NavigationItem';\r\n\r\nexport class MinimalTheme extends DefaultTheme {\r\n    /**\r\n     * Create a new DefaultTheme instance.\r\n     *\r\n     * @param renderer  The renderer this theme is attached to.\r\n     * @param basePath  The base path of this theme.\r\n     */\r\n    constructor(renderer: Renderer, basePath: string) {\r\n        super(renderer, basePath);\r\n\r\n        renderer.removeComponent('assets');\r\n        renderer.removeComponent('javascriptIndex');\r\n        renderer.removeComponent('navigation');\r\n        renderer.removeComponent('toc');\r\n\r\n        this.listenTo(renderer, PageEvent.BEGIN, this.onRendererBeginPage);\r\n    }\r\n\r\n    /**\r\n     * Test whether the given path contains a documentation generated by this theme.\r\n     *\r\n     * @param path  The path of the directory that should be tested.\r\n     * @returns     TRUE if the given path seems to be a previous output directory,\r\n     *              otherwise FALSE.\r\n     */\r\n    isOutputDirectory(path: string): boolean {\r\n        if (!FS.existsSync(Path.join(path, 'index.html'))) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Map the models of the given project to the desired output files.\r\n     *\r\n     * @param project  The project whose urls should be generated.\r\n     * @returns        A list of [[UrlMapping]] instances defining which models\r\n     *                 should be rendered to which files.\r\n     */\r\n    getUrls(project: ProjectReflection): UrlMapping[] {\r\n        const urls: UrlMapping[] = [];\r\n        urls.push(new UrlMapping('index.html', project, 'index.hbs'));\r\n\r\n        project.url = 'index.html';\r\n        project.anchor = undefined;\r\n        project.hasOwnDocument = true;\r\n\r\n        (project.children || []).forEach((child) => {\r\n            DefaultTheme.applyAnchorUrl(child, project);\r\n        });\r\n\r\n        return urls;\r\n    }\r\n\r\n    /**\r\n     * Triggered before a document will be rendered.\r\n     *\r\n     * @param page  An event object describing the current render operation.\r\n     */\r\n    private onRendererBeginPage(page: PageEvent) {\r\n        const model = page.model;\r\n        if (!(model instanceof Reflection)) {\r\n            return;\r\n        }\r\n\r\n        page.toc = new NavigationItem();\r\n        MinimalTheme.buildToc(page.model, page.toc);\r\n    }\r\n\r\n    /**\r\n     * Create a toc navigation item structure.\r\n     *\r\n     * @param model   The models whose children should be written to the toc.\r\n     * @param parent  The parent [[Models.NavigationItem]] the toc should be appended to.\r\n     */\r\n    static buildToc(model: DeclarationReflection, parent: NavigationItem) {\r\n        const children = model.children || [];\r\n        children.forEach((child: DeclarationReflection) => {\r\n            const item = NavigationItem.create(child, parent, true);\r\n            MinimalTheme.buildToc(child, item);\r\n        });\r\n    }\r\n}\r\n"]}